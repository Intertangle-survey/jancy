//.............................................................................

foo (bool isError)
{
	printf ("foo ()\n");

	if (isError)
	{
		printf ("foo is about to throw...\n");
		std.setStringError ("foo-error");
		throw;
	}
}

int main ()
{
	printf ("main ()\n");

	bool result = try foo (true);
	printf ("result = %d\n", result);

	try
	{
		printf ("before calling foo...\n");
		foo (false);
		foo (false);
		foo (true);

		result = true;

	finally:
		printf ("try-finally\n", result);		
		foo (true);
	}

	printf ("result = %d\n", result);
	return 0;

finally:
	printf ("main-finally\n");
}

//.............................................................................
